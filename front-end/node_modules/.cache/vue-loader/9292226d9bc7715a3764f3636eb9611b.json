{"remainingRequest":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/roliasong/Desktop/WebDev/authenticating/front-end/src/components/MyPhotos.vue?vue&type=style&index=0&id=282842fd&scoped=true&lang=css&","dependencies":[{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/src/components/MyPhotos.vue","mtime":1639821427954},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/css-loader/dist/cjs.js","mtime":1639544567330},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1639544569324},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/postcss-loader/src/index.js","mtime":1639544567961},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/cache-loader/dist/cjs.js","mtime":1639544566065},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/vue-loader/lib/index.js","mtime":1639544568744}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgp0ZXh0YXJlYSB7CiAgd2lkdGg6IDEwMCU7CiAgbWF4LXdpZHRoOiA1MDBweDsKfQoKaDMgewogIGZvbnQtc2l6ZTogMTJweDsKICBmb250LXdlaWdodDogbm9ybWFsOwogIGJhY2tncm91bmQtY29sb3I6ICNjY2M7CiAgcGFkZGluZzogMTBweCAyMHB4Owp9CgoKbGFiZWwgewogIGJhY2tncm91bmQtY29sb3I6ICMwMDA7CiAgY29sb3I6IHdoaXRlOwogIHBhZGRpbmc6IDVweDsKICBib3JkZXItcmFkaXVzOiAzMHB4OwogIGZvbnQtc2l6ZTogMTJweDsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7Cn0KCg=="},{"version":3,"sources":["MyPhotos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyPhotos.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div class=\"main\">\n  <h2>Logged in as: {{user.firstName}} {{user.lastName}}</h2>\n  <h1>My Photos</h1>\n  <div>\n    <button @click=\"setCreating\" class=\"pure-button button-xsmall\">\n        <i class=\"fas fa-plus\" />\n    </button>\n    </div>\n\n    <form class=\"pure-form\" v-if=\"creating\" @submit.prevent=\"upload\">\n       <legend>Add to the Family</legend>\n        <fieldset>\n          <input v-model=\"name\" placeholder=\"Main person in photo?\">\n        </fieldset>\n        <fieldset>\n          <textarea v-model=\"momName\" placeholder=\"Mom's name\"></textarea>\n        </fieldset>\n        <!-- original had v-model=\"description\" -->\n        <fieldset>\n          <textarea v-model=\"dadName\" placeholder=\"Dad's name\"></textarea>\n        </fieldset>\n       <fieldset>\n          <div class=\"imageInput\" @click=\"chooseImage\">\n            <img v-if=\"url\" :src=\"url\" />\n            <div v-if=\"!url\" class=\"placeholder\">\n              Choose an Image\n            </div>\n            <input class=\"fileInput\" ref=\"fileInput\" type=\"file\" @input=\"fileChanged\">\n          </div>\n          <p v-if=\"error\" class=\"error\">{{error}}</p>\n        </fieldset>\n        <fieldset class=\"buttons\">\n          <button type=\"button\" @click=\"close\" class=\"pure-button\">Close</button>\n          <button type=\"submit\" class=\"pure-button pure-button-primary right\">Upload</button>\n        </fieldset>\n    </form>\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport moment from 'moment';\nexport default {\n  name: 'MyPhotos',\n  data() {\n        return {\n        creating: false,\n        name: '',\n        momName: '',\n        dadName:'',\n        url: '',\n        file: null,\n        error: '',\n        }\n    },\n  computed: {\n    user() {\n      return this.$root.$data.user;\n    },\n  },\n  methods: {\n    async getPhotos() {\n      try {\n        let response = await axios.get(\"/api/photos\");\n        this.photos = response.data;\n      } catch (error) {\n        this.error = error.response.data.message;\n      }\n    },\n    //below function was getTickets and photos was tickets\n    \n    created() {\n        this.getPhotos();\n    },\n    time(d) {\n      return moment(d).format('D MMMM YYYY, h:mm:ss a');\n    },\n    setCreating() {\n        this.creating = true;\n    },\n    cancelCreating() {\n        this.creating = false;\n    },\n    fileChanged(event) {\n            this.file = event.target.files[0];\n            this.url = URL.createObjectURL(this.file);\n        },\n    close() {\n      this.$emit('close');\n    },\n    chooseImage() {\n        this.$refs.fileInput.click()\n    },\n    async upload() {\n      try {\n        const formData = new FormData();\n        formData.append('photo', this.file, this.file.name);\n        formData.append('name', this.name);\n        formData.append('momName', this.momName);\n        formData.append('dadName', this.dadName);\n        await axios.post(\"/api/photos\", formData);\n        this.creating = false,\n        this.file = null;\n        this.url = \"\";\n        this.name = \"\";\n        this.momName = \"\";\n        this.dadName = \"\";\n        this.$emit('uploadFinished');\n      } \n      catch (error) {\n        this.error = \"Error: \" + error.response.data.message;\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\ntextarea {\n  width: 100%;\n  max-width: 500px;\n}\n\nh3 {\n  font-size: 12px;\n  font-weight: normal;\n  background-color: #ccc;\n  padding: 10px 20px;\n}\n\n\nlabel {\n  background-color: #000;\n  color: white;\n  padding: 5px;\n  border-radius: 30px;\n  font-size: 12px;\n  margin-right: 10px;\n}\n\n</style>"]}]}