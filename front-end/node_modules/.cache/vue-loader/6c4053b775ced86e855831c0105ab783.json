{"remainingRequest":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/roliasong/Desktop/WebDev/authenticating/front-end/src/components/MyPhotos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/src/components/MyPhotos.vue","mtime":1639821427954},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/cache-loader/dist/cjs.js","mtime":1639544566065},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/babel-loader/lib/index.js","mtime":1639544568021},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/cache-loader/dist/cjs.js","mtime":1639544566065},{"path":"/Users/roliasong/Desktop/WebDev/authenticating/front-end/node_modules/vue-loader/lib/index.js","mtime":1639544568744}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNeVBob3RvcycsCiAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgIGNyZWF0aW5nOiBmYWxzZSwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBtb21OYW1lOiAnJywKICAgICAgICBkYWROYW1lOicnLAogICAgICAgIHVybDogJycsCiAgICAgICAgZmlsZTogbnVsbCwKICAgICAgICBlcnJvcjogJycsCiAgICAgICAgfQogICAgfSwKICBjb21wdXRlZDogewogICAgdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3QuJGRhdGEudXNlcjsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRQaG90b3MoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCIvYXBpL3Bob3RvcyIpOwogICAgICAgIHRoaXMucGhvdG9zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLmVycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgLy9iZWxvdyBmdW5jdGlvbiB3YXMgZ2V0VGlja2V0cyBhbmQgcGhvdG9zIHdhcyB0aWNrZXRzCiAgICAKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRQaG90b3MoKTsKICAgIH0sCiAgICB0aW1lKGQpIHsKICAgICAgcmV0dXJuIG1vbWVudChkKS5mb3JtYXQoJ0QgTU1NTSBZWVlZLCBoOm1tOnNzIGEnKTsKICAgIH0sCiAgICBzZXRDcmVhdGluZygpIHsKICAgICAgICB0aGlzLmNyZWF0aW5nID0gdHJ1ZTsKICAgIH0sCiAgICBjYW5jZWxDcmVhdGluZygpIHsKICAgICAgICB0aGlzLmNyZWF0aW5nID0gZmFsc2U7CiAgICB9LAogICAgZmlsZUNoYW5nZWQoZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5maWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICB0aGlzLnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5maWxlKTsKICAgICAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICB9LAogICAgY2hvb3NlSW1hZ2UoKSB7CiAgICAgICAgdGhpcy4kcmVmcy5maWxlSW5wdXQuY2xpY2soKQogICAgfSwKICAgIGFzeW5jIHVwbG9hZCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncGhvdG8nLCB0aGlzLmZpbGUsIHRoaXMuZmlsZS5uYW1lKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLCB0aGlzLm5hbWUpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbW9tTmFtZScsIHRoaXMubW9tTmFtZSk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkYWROYW1lJywgdGhpcy5kYWROYW1lKTsKICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCIvYXBpL3Bob3RvcyIsIGZvcm1EYXRhKTsKICAgICAgICB0aGlzLmNyZWF0aW5nID0gZmFsc2UsCiAgICAgICAgdGhpcy5maWxlID0gbnVsbDsKICAgICAgICB0aGlzLnVybCA9ICIiOwogICAgICAgIHRoaXMubmFtZSA9ICIiOwogICAgICAgIHRoaXMubW9tTmFtZSA9ICIiOwogICAgICAgIHRoaXMuZGFkTmFtZSA9ICIiOwogICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZEZpbmlzaGVkJyk7CiAgICAgIH0gCiAgICAgIGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuZXJyb3IgPSAiRXJyb3I6ICIgKyBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgIH0KICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["MyPhotos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyPhotos.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div class=\"main\">\n  <h2>Logged in as: {{user.firstName}} {{user.lastName}}</h2>\n  <h1>My Photos</h1>\n  <div>\n    <button @click=\"setCreating\" class=\"pure-button button-xsmall\">\n        <i class=\"fas fa-plus\" />\n    </button>\n    </div>\n\n    <form class=\"pure-form\" v-if=\"creating\" @submit.prevent=\"upload\">\n       <legend>Add to the Family</legend>\n        <fieldset>\n          <input v-model=\"name\" placeholder=\"Main person in photo?\">\n        </fieldset>\n        <fieldset>\n          <textarea v-model=\"momName\" placeholder=\"Mom's name\"></textarea>\n        </fieldset>\n        <!-- original had v-model=\"description\" -->\n        <fieldset>\n          <textarea v-model=\"dadName\" placeholder=\"Dad's name\"></textarea>\n        </fieldset>\n       <fieldset>\n          <div class=\"imageInput\" @click=\"chooseImage\">\n            <img v-if=\"url\" :src=\"url\" />\n            <div v-if=\"!url\" class=\"placeholder\">\n              Choose an Image\n            </div>\n            <input class=\"fileInput\" ref=\"fileInput\" type=\"file\" @input=\"fileChanged\">\n          </div>\n          <p v-if=\"error\" class=\"error\">{{error}}</p>\n        </fieldset>\n        <fieldset class=\"buttons\">\n          <button type=\"button\" @click=\"close\" class=\"pure-button\">Close</button>\n          <button type=\"submit\" class=\"pure-button pure-button-primary right\">Upload</button>\n        </fieldset>\n    </form>\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport moment from 'moment';\nexport default {\n  name: 'MyPhotos',\n  data() {\n        return {\n        creating: false,\n        name: '',\n        momName: '',\n        dadName:'',\n        url: '',\n        file: null,\n        error: '',\n        }\n    },\n  computed: {\n    user() {\n      return this.$root.$data.user;\n    },\n  },\n  methods: {\n    async getPhotos() {\n      try {\n        let response = await axios.get(\"/api/photos\");\n        this.photos = response.data;\n      } catch (error) {\n        this.error = error.response.data.message;\n      }\n    },\n    //below function was getTickets and photos was tickets\n    \n    created() {\n        this.getPhotos();\n    },\n    time(d) {\n      return moment(d).format('D MMMM YYYY, h:mm:ss a');\n    },\n    setCreating() {\n        this.creating = true;\n    },\n    cancelCreating() {\n        this.creating = false;\n    },\n    fileChanged(event) {\n            this.file = event.target.files[0];\n            this.url = URL.createObjectURL(this.file);\n        },\n    close() {\n      this.$emit('close');\n    },\n    chooseImage() {\n        this.$refs.fileInput.click()\n    },\n    async upload() {\n      try {\n        const formData = new FormData();\n        formData.append('photo', this.file, this.file.name);\n        formData.append('name', this.name);\n        formData.append('momName', this.momName);\n        formData.append('dadName', this.dadName);\n        await axios.post(\"/api/photos\", formData);\n        this.creating = false,\n        this.file = null;\n        this.url = \"\";\n        this.name = \"\";\n        this.momName = \"\";\n        this.dadName = \"\";\n        this.$emit('uploadFinished');\n      } \n      catch (error) {\n        this.error = \"Error: \" + error.response.data.message;\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\ntextarea {\n  width: 100%;\n  max-width: 500px;\n}\n\nh3 {\n  font-size: 12px;\n  font-weight: normal;\n  background-color: #ccc;\n  padding: 10px 20px;\n}\n\n\nlabel {\n  background-color: #000;\n  color: white;\n  padding: 5px;\n  border-radius: 30px;\n  font-size: 12px;\n  margin-right: 10px;\n}\n\n</style>"]}]}